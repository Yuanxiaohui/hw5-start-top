// Generated by LiveScript 1.3.1
(function(){
  var leave, getRamdomNumber, judge, getSum;
  $(function(){
    $('.button').click(getRamdomNumber);
    $('#at-plus-container').bind('mouseleave', leave);
  });
  leave = function(){
    var i$, ref$, len$, button;
    $('.button').css('background-color', 'blue');
    $('.button').click(getRamdomNumber);
    for (i$ = 0, len$ = (ref$ = $('.button')).length; i$ < len$; ++i$) {
      button = ref$[i$];
      $(button).children().eq(1).hide();
    }
    for (i$ = 0, len$ = (ref$ = $('.button')).length; i$ < len$; ++i$) {
      button = ref$[i$];
      $(button).children().eq(1).html('');
    }
    $('#info-bar').unbind('click');
    $('#sum').html("");
  };
  getRamdomNumber = function(){
    var this$ = this;
    $('.button').css('background-color', 'gray');
    $('.button').unbind('click');
    $(this).css('background-color', 'blue');
    $(this).children().eq(1).html('...');
    $(this).children().eq(1).show();
    $.get('/', function(result){
      var i$, ref$, len$, button;
      $(this$).children().eq(1).html(result);
      for (i$ = 0, len$ = (ref$ = $('.button')).length; i$ < len$; ++i$) {
        button = ref$[i$];
        if ($(button).children().eq(1).html() === '') {
          $(button).click(getRamdomNumber);
        }
      }
      for (i$ = 0, len$ = (ref$ = $('.button')).length; i$ < len$; ++i$) {
        button = ref$[i$];
        if ($(button).children().eq(1).html() === '') {
          $(button).css('background-color', 'blue');
        }
      }
      $(this$).css('background-color', 'gray');
      $(this$).unbind('click');
      if (judge()) {
        $('#info-bar').click(getSum);
      }
    });
  };
  judge = function(){
    var i$, ref$, len$, unread;
    for (i$ = 0, len$ = (ref$ = $('.unread')).length; i$ < len$; ++i$) {
      unread = ref$[i$];
      if ($(unread).html() === "..." || $(unread).html() === "") {
        return false;
      }
    }
    return true;
  };
  getSum = function(){
    var su, i$, ref$, len$, unread, str;
    su = 0;
    for (i$ = 0, len$ = (ref$ = $('.unread')).length; i$ < len$; ++i$) {
      unread = ref$[i$];
      su += parseInt($(unread).text());
    }
    str = su.toString();
    $('#sum').html(str);
    $('#info-bar').unbind['click'];
  };
}).call(this);
